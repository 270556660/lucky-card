<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Lucky-card by Franslee</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Lucky-card</h1>
      <h2 class="project-tagline">基于HTML5 Canvas的刮奖（刮刮卡）小控件(Scratch card based on HTML5 Canvas)</h2>
      <a href="https://github.com/Franslee/lucky-card" class="btn">View on GitHub</a>
      <a href="https://github.com/Franslee/lucky-card/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Franslee/lucky-card/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="lucky-card" class="anchor" href="#lucky-card" aria-hidden="true"><span class="octicon octicon-link"></span></a>lucky-card</h1>

<p>lucky-card是一个实现刮刮卡刮奖效果的JavaScript小控件，基于HTML5 Canvas，采用原生js编写，不依赖任何类库，支持AMD/CMD模块化加载，支持iOS、Android和桌面浏览器（IE&gt;=9）,Windows Phone未测。</p>

<h2>
<a id="demo" class="anchor" href="#demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>DEMO</h2>

<p>请用手机扫描以下二维码，桌面浏览器可以<a href="http://franslee.github.io/lucky-card/demo.html">点击这里</a></p>

<h1>
<a id="" class="anchor" href="#" aria-hidden="true"><span class="octicon octicon-link"></span></a><img src="http://franslee.github.io/lucky-card/qr_code.png" alt="github" title="lucky-card DEMO">
</h1>

<h2>
<a id="用法" class="anchor" href="#%E7%94%A8%E6%B3%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>用法</h2>

<p>HTML结构</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>scratch<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>card<span class="pl-pds">"</span></span>&gt;￥5000000元&lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<p>在页面中引入控件所需样式表文件lucky-card.css</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">link</span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>../dist/lucky-card.css<span class="pl-pds">"</span></span>&gt;</pre></div>

<p><em>以上css文件只有控件所必需的样式，刮刮卡样式请根据需要自行编写（可参考DEMO页面）</em></p>

<p>引入lucky-card.js/lucky-card.min.js文件</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">'</span>../dist/lucky-card.js<span class="pl-pds">'</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>在确保页面相关DOM加载完毕(<em>如写在页面底部，或document的DOMContentLoaded事件处理函数中</em>)之后，初始化控件</p>

<div class="highlight highlight-source-js"><pre>LuckyCard.case();</pre></div>

<h2>
<a id="可配置项与回调函数" class="anchor" href="#%E5%8F%AF%E9%85%8D%E7%BD%AE%E9%A1%B9%E4%B8%8E%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>可配置项与回调函数</h2>

<p>初始化lucky-card控件时，支持传入一个JSON对象和(或)一个回调函数，用于配置控件功能/设置回调函数</p>

<div class="highlight highlight-source-js"><pre>LuckyCard.case(settings,callback);</pre></div>

<ul>
<li>参数settings是一个JSON对象，可选，用于配置控件功能</li>
<li>参数callback是回调函数，可选，也可以写在settings中</li>
</ul>

<h3>
<a id="可配置项settings一览" class="anchor" href="#%E5%8F%AF%E9%85%8D%E7%BD%AE%E9%A1%B9settings%E4%B8%80%E8%A7%88" aria-hidden="true"><span class="octicon octicon-link"></span></a>可配置项（settings）一览</h3>

<table>
    <tr>
        <th>key</th>
        <th>类型</th>
        <th>默认值</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>coverColor</td>
        <td>string</td>
        <td>"#C5C5C5"</td>
        <td>刮开层的颜色，未设置coverImg时生效，支持十六进制和rgba写法</td>
    </tr>
    <tr>
        <td>coverImg</td>
        <td>string</td>
        <td>""</td>
        <td>刮开层可以是一张图片，在这里设置图片地址，一旦设置此项，coverColor将失效。（注意：图片地址不支持跨域，如果跨域可以考虑将先其转成Data URI）</td>
    </tr>
    <tr>
        <td>ratio</td>
        <td>number</td>
        <td>0.8</td>
        <td>触发回调函数时刮开面积占总面积的比例，超过这个比例回调就触发。建议取值在0到1之间。</td>
    </tr>
    <tr>
        <td>callback</td>
        <td>function</td>
        <td>null</td>
        <td>回调函数，在刮开面积占总面积的比例超过设定值时触发，亦可作为一个独立的参数存在。回调函数内可以调用this.clearCover()方法清除掉刮开层的所有像素。</td>
    </tr>
</table>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//基本用法</span>
LuckyCard.case({coverColor<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>#CCCCCC<span class="pl-pds">'</span></span>,ratio<span class="pl-k">:</span>.<span class="pl-c1">6</span>,<span class="pl-en">callback</span><span class="pl-k">:</span><span class="pl-k">function</span>(){<span class="pl-c1">alert</span>(<span class="pl-s"><span class="pl-pds">'</span>中奖啦！<span class="pl-pds">'</span></span>)}});

<span class="pl-c">//刮开层支持使用图片，但图片不能跨域，如果跨域可以考虑将先其转成Data URI，再设置</span>
LuckyCard.case({coverImg<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>./demo.jpg<span class="pl-pds">'</span></span>});

<span class="pl-c">//callback可作为一个独立的参数存在</span>
LuckyCard.case(<span class="pl-k">function</span>(){
    <span class="pl-c">//清除掉刮开层的所有像素</span>
    <span class="pl-v">this</span>.clearCover();
});</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Franslee/lucky-card">Lucky-card</a> is maintained by <a href="https://github.com/Franslee">Franslee</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
